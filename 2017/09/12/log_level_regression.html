<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="author" content="ysk24ok">
  
  <meta name="description" content="">
  <meta property="og:description" content="">
  
  <meta property="og:image" content="https://ysk24ok.github.io/assets/images/profile.jpeg">
  <meta property="og:title" content="ログレベル回帰と対数リンク線形回帰の違い">
  <meta property="og:url" content="https://ysk24ok.github.io/2017/09/12/log_level_regression.html">
  <meta property="og:type" content="article">
  <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
  <!-- MathJax -->
  <!-- http://docs.mathjax.org/en/latest/start.html#secure-access-to-the-cdn -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ['\\(','\\)'] ],
        processEscapes: true
      }
    });
  </script>
  <script type="text/javascript" async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <!-- bootstrap -->
  <link rel="stylesheet" type="text/css" href="/assets/css/bootstrap.min.css">
  <script src="/assets/js/jquery-2.1.4.min.js"></script>
  <script src="/assets/js/bootstrap.min.js"></script>
  <!-- github.io default -->
  <link rel="stylesheet" type="text/css" href="/assets/css/stylesheet.css" media="screen">
  <link rel="stylesheet" type="text/css" href="/assets/css/github-dark.css" media="screen">
  <link rel="stylesheet" type="text/css" href="/assets/css/print.css" media="print">
  <!-- syntax highlight css -->
  <link rel="stylesheet" type="text/css" href="/assets/css/syntax.css" media="screen">
  <!-- My customized css -->
  <link rel="stylesheet" type="text/css" href="/assets/css/main.css" media="screen">
  <!-- RSS -->
  <link href="/feed.xml" type="application/rss+xml" rel="alternate" title="ysk24ok.github.io" />
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-131519041-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-131519041-1');
  </script>
  <!--[if lt IE 9]>
  <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <title>ログレベル回帰と対数リンク線形回帰の違い - ysk24ok.github.io</title>
</head>

  <body>
    <div id="container">
      <div class="inner">
        <header>
  <h1><a href="/">ysk24ok.github.io</a></h1>
</header>
<nav class="navbar navbar-default" role="navigation">
  <ul id="main-navigation" class="nav navbar-nav">
    <li><a href="/">Home</a></li>
    <li><a href="/about">About</a></li>
  </ul>
</nav>

        <div class="post-item">
          <div class="post-header">
  <h1>
    <a href="/2017/09/12/log_level_regression.html">ログレベル回帰と対数リンク線形回帰の違い</a>
  </h1>
  <ul class="post-tags">
    
      <li><a href="#">GLM</a></li>
    
      <li><a href="#">Japanese</a></li>
    
  </ul>
  
  <div class="post-date">posted on 12 Sep 2017</div>
  
  <hr>
</div>

          <div class="post-content">
            <ul class="social-buttons">
  <!-- hatena bookmark -->
  <li>
    <a href="http://b.hatena.ne.jp/entry/ysk24ok.github.io/2017/09/12/log_level_regression.html" class="hatena-bookmark-button" data-hatena-bookmark-title="ログレベル回帰と対数リンク線形回帰の違い - ysk24ok.github.io" data-hatena-bookmark-layout="simple-balloon" title="このエントリーをはてなブックマークに追加">
      <img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" />
    </a>
    <script type="text/javascript" src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>
  </li>
  <!-- twitter -->
  <li>
    <a href="https://twitter.com/share" class="twitter-share-button">Tweet</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
  </li>
</ul>

            <p><a href="http://www.yuhikaku.co.jp/books/detail/9784641150287">計量経済学の第一歩</a>を読んでいて目的変数を対数変換するログレベル回帰が話に出てきたが、<br />
リンク関数がlogの線形回帰とどう違うのか分からなかったので、その違いについてまとめた。</p>

<!-- more -->

<p>正直、<a href="http://d.hatena.ne.jp/mrkm-a/20140513/p1">対数変換と一般化線形モデル - DTAL（旧RCEAL）留学記録</a>のほうがわかりやすいのでこの記事を読むべき。</p>

<h1 id="違い">違い</h1>

<p>$\alpha$を傾き、$\beta$を切片、$\epsilon$を誤差項とする。</p>

<h2 id="ログレベル回帰-log-level-regression">ログレベル回帰 (log-level regression)</h2>

<script type="math/tex; mode=display">\ln{y} = \alpha x + \beta + \epsilon</script>

<p>ログレベル回帰では目的変数$y$を対数変換し、$\ln{y}$と$\alpha x + \beta$の差を最小化する。<br />
このとき、誤差項$\epsilon$は右辺に存在する。</p>

<p>$y$をオリジナルスケールに戻すと、</p>

<script type="math/tex; mode=display">y = \exp^{\alpha x + \beta + \epsilon}</script>

<p>となる。<br />
つまり、誤差項は指数変換した正規分布(=対数正規分布)にしたがう。</p>

<h2 id="対数リンク線形回帰-log-link-linear-regression">対数リンク線形回帰 (log-link linear regression)</h2>

<script type="math/tex; mode=display">\ln{(y + \epsilon)} = \alpha x + \beta</script>

<p>対数リンク関数を使用した線形回帰では、誤差項$\epsilon$は左辺に存在する。</p>

<p>$y$をオリジナルスケールに戻すと、</p>

<script type="math/tex; mode=display">y = \exp^{\alpha x + \beta} + \epsilon</script>

<p>となり、誤差項は正規分布にしたがう。</p>

<h2 id="使い分け">使い分け</h2>

<p>オリジナルスケールに戻したときの誤差構造によると言える。<br />
つまり、誤差が正規分布にしたがうと仮定しているなら対数リンク線形回帰、<br />
誤差が対数正規分布にしたがうと仮定しているならログレベル回帰を使用する。</p>

<h1 id="statsmodelsで比較">statsmodelsで比較</h1>

<p>本書で使用されている5_1_income.csvを使用する。<br />
このcsvには</p>

<ul>
  <li><code class="highlighter-rouge">yeduc</code>: 教育年数</li>
  <li><code class="highlighter-rouge">income</code>: 収入</li>
  <li><code class="highlighter-rouge">lincome</code>: <code class="highlighter-rouge">yeduc</code>を対数変換したもの</li>
  <li><code class="highlighter-rouge">lyeduc</code>: <code class="highlighter-rouge">income</code>を対数変換したもの</li>
</ul>

<p>の4つのカラムが含まれている。</p>

<p>教育年数から収入を説明するモデルを、</p>

<ul>
  <li>ログレベル回帰 (<code class="highlighter-rouge">yeduc</code>で<code class="highlighter-rouge">lincome</code>を説明する)</li>
  <li>対数リンク線形回帰 (<code class="highlighter-rouge">yeduc</code>で<code class="highlighter-rouge">income</code>を説明する)</li>
</ul>

<p>の2パターンで作成する。</p>

<script src="https://gist.github.com/ysk24ok/48e0ead26db35b1615011cee331586d0.js"></script>

<p>推定した回帰パラメータの値は微妙に異なっており、<br />
ログレベル回帰と対数リンク線形回帰は別物であることがわかる。</p>

<h1 id="参考">参考</h1>

<ul>
  <li><a href="http://d.hatena.ne.jp/mrkm-a/20140513/p1">対数変換と一般化線形モデル - DTAL（旧RCEAL）留学記録</a></li>
  <li><a href="http://www.cazaar.com/ta/econ113/interpreting-beta">Interpret Regression Coefficient Estimates - {level-level, log-level, level-log &amp; log-log regression} - Curtis Kephart</a></li>
</ul>

            <ul class="social-buttons">
  <!-- hatena bookmark -->
  <li>
    <a href="http://b.hatena.ne.jp/entry/ysk24ok.github.io/2017/09/12/log_level_regression.html" class="hatena-bookmark-button" data-hatena-bookmark-title="ログレベル回帰と対数リンク線形回帰の違い - ysk24ok.github.io" data-hatena-bookmark-layout="simple-balloon" title="このエントリーをはてなブックマークに追加">
      <img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" />
    </a>
    <script type="text/javascript" src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>
  </li>
  <!-- twitter -->
  <li>
    <a href="https://twitter.com/share" class="twitter-share-button">Tweet</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
  </li>
</ul>

          </div>
        </div>
        <footer>
  This page was generated by <a href="https://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
</footer>

      </div>
    </div>
  </body>
</html>
